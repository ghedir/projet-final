{"ast":null,"code":"'use strict';\n\nconst {\n  promisify\n} = require('util');\n\nconst handler = {\n  get: function (target, prop, receiver) {\n    if (typeof target[prop] !== 'function') {\n      return target[prop];\n    }\n\n    if (target[prop][promisify.custom]) {\n      return function () {\n        return Reflect.get(target, prop, receiver)[promisify.custom].apply(target, arguments);\n      };\n    }\n\n    return function () {\n      return new Promise((resolve, reject) => {\n        Reflect.get(target, prop, receiver).apply(target, [...arguments, function (err, result) {\n          if (err) {\n            return reject(err);\n          }\n\n          resolve(result);\n        }]);\n      });\n    };\n  }\n};\n\nmodule.exports = function (thingToPromisify) {\n  if (typeof thingToPromisify === 'function') {\n    return promisify(thingToPromisify);\n  }\n\n  if (typeof thingToPromisify === 'object') {\n    return new Proxy(thingToPromisify, handler);\n  }\n\n  throw new TypeError('Can only promisify functions or objects');\n};","map":{"version":3,"sources":["C:/Users/ghedi/Documents/GhedBlog/node_modules/npm/node_modules/@gar/promisify/index.js"],"names":["promisify","require","handler","get","target","prop","receiver","custom","Reflect","apply","arguments","Promise","resolve","reject","err","result","module","exports","thingToPromisify","Proxy","TypeError"],"mappings":"AAAA;;AAEA,MAAM;AAAEA,EAAAA;AAAF,IAAgBC,OAAO,CAAC,MAAD,CAA7B;;AAEA,MAAMC,OAAO,GAAG;AACdC,EAAAA,GAAG,EAAE,UAAUC,MAAV,EAAkBC,IAAlB,EAAwBC,QAAxB,EAAkC;AACrC,QAAI,OAAOF,MAAM,CAACC,IAAD,CAAb,KAAwB,UAA5B,EAAwC;AACtC,aAAOD,MAAM,CAACC,IAAD,CAAb;AACD;;AACD,QAAID,MAAM,CAACC,IAAD,CAAN,CAAaL,SAAS,CAACO,MAAvB,CAAJ,EAAoC;AAClC,aAAO,YAAY;AACjB,eAAOC,OAAO,CAACL,GAAR,CAAYC,MAAZ,EAAoBC,IAApB,EAA0BC,QAA1B,EAAoCN,SAAS,CAACO,MAA9C,EAAsDE,KAAtD,CAA4DL,MAA5D,EAAoEM,SAApE,CAAP;AACD,OAFD;AAGD;;AACD,WAAO,YAAY;AACjB,aAAO,IAAIC,OAAJ,CAAY,CAACC,OAAD,EAAUC,MAAV,KAAqB;AACtCL,QAAAA,OAAO,CAACL,GAAR,CAAYC,MAAZ,EAAoBC,IAApB,EAA0BC,QAA1B,EAAoCG,KAApC,CAA0CL,MAA1C,EAAkD,CAAC,GAAGM,SAAJ,EAAe,UAAUI,GAAV,EAAeC,MAAf,EAAuB;AACtF,cAAID,GAAJ,EAAS;AACP,mBAAOD,MAAM,CAACC,GAAD,CAAb;AACD;;AACDF,UAAAA,OAAO,CAACG,MAAD,CAAP;AACD,SALiD,CAAlD;AAMD,OAPM,CAAP;AAQD,KATD;AAUD;AApBa,CAAhB;;AAuBAC,MAAM,CAACC,OAAP,GAAiB,UAAUC,gBAAV,EAA4B;AAC3C,MAAI,OAAOA,gBAAP,KAA4B,UAAhC,EAA4C;AAC1C,WAAOlB,SAAS,CAACkB,gBAAD,CAAhB;AACD;;AACD,MAAI,OAAOA,gBAAP,KAA4B,QAAhC,EAA0C;AACxC,WAAO,IAAIC,KAAJ,CAAUD,gBAAV,EAA4BhB,OAA5B,CAAP;AACD;;AACD,QAAM,IAAIkB,SAAJ,CAAc,yCAAd,CAAN;AACD,CARD","sourcesContent":["'use strict'\n\nconst { promisify } = require('util')\n\nconst handler = {\n  get: function (target, prop, receiver) {\n    if (typeof target[prop] !== 'function') {\n      return target[prop]\n    }\n    if (target[prop][promisify.custom]) {\n      return function () {\n        return Reflect.get(target, prop, receiver)[promisify.custom].apply(target, arguments)\n      }\n    }\n    return function () {\n      return new Promise((resolve, reject) => {\n        Reflect.get(target, prop, receiver).apply(target, [...arguments, function (err, result) {\n          if (err) {\n            return reject(err)\n          }\n          resolve(result)\n        }])\n      })\n    }\n  }\n}\n\nmodule.exports = function (thingToPromisify) {\n  if (typeof thingToPromisify === 'function') {\n    return promisify(thingToPromisify)\n  }\n  if (typeof thingToPromisify === 'object') {\n    return new Proxy(thingToPromisify, handler)\n  }\n  throw new TypeError('Can only promisify functions or objects')\n}\n"]},"metadata":{},"sourceType":"script"}